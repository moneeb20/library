<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/stylesupport.css') }}">
    <link rel="stylesheet" href="../static/css/stylemodercdn.css">
  <title>Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</title>
  <style>
    .swal2-arabic {
        font-family: 'Tahoma', Arial, sans-serif;
        direction: rtl;
    }
    .swal2-confirm-arabic {
        background-color: #244f76 !important;
        padding: 8px 20px !important;
    }
</style>
</head>
<body>
  <header><h1>Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</h1></header>
  
  <nav>
    <a href="{{ url_for('index') }}">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="{{ url_for('books') }}">Ø§Ù„ÙƒØªØ¨</a>
    <a href="{{ url_for('login') }}">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
    <a href="{{ url_for('support') }}">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</a>
    <a href="{{ url_for('moder') }}" id="moderLink">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
    <a href="{{ url_for('profile') }}">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a>
  </nav>
  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

  <div class="container">
    <h2>Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</h2>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert success">
          {{ messages[0] }}
        </div>
      {% endif %}
    {% endwith %}

    <form id="supportForm" method="post" action="{{ url_for('support') }}">
      <label for="name">Ø§Ù„Ø§Ø³Ù…:</label>
      <input type="text" id="name" name="name" required>

      <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
      <input type="email" id="email" name="email" required>

      <label for="subject">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:</label>
      <input type="text" id="subject" name="subject">

      <label for="message">ÙˆØµÙ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</label>
      <textarea id="message" name="message" rows="5" required></textarea>

      <button class="btn" type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
    </form>
  </div>

  <footer>&copy; 2025 Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</footer>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const moderLink = document.getElementById("moderLink");

    if (moderLink) {
      moderLink.addEventListener("click", function (e) {
        e.preventDefault();  // Ù…Ù†Ø¹ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„

        // Ø¬Ù„Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© (ØªÙ…Ø±ÙŠØ± Ù…Ù† Ø¨Ø§ÙŠØ«ÙˆÙ† Ø¥Ù„Ù‰ HTML)
        const userType = "{{ session.get('user_type', 'guest') }}";

        if (userType === "admin" || userType === "moderator") {
          window.location.href = "/moder";
        } else {
          showAlert("ğŸš« Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….");
        }
      });
    }

    function showAlert(message) {
      const existing = document.getElementById("customAlert");
      if (existing) existing.remove();

      const alertBox = document.createElement("div");
      alertBox.id = "customAlert";
      alertBox.innerHTML = message;
      alertBox.style.cssText = `
        background-color: #ffdddd;
        color: #a94442;
        padding: 15px;
        margin: 20px;
        border: 1px solid #f5c6cb;
        border-radius: 5px;
        text-align: center;
        font-weight: bold;
      `;
      document.body.prepend(alertBox);

      setTimeout(() => {
        alertBox.remove();
      }, 4000);
    }
  });
</script>
<!-- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª SweetAlert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    Swal.fire({
                        position: 'center',
                        icon: '{{ "success" if category == "success" else "error" }}',
                        title: '{{ message }}',
                        showConfirmButton: {{ 'false' if category == 'success' else 'true' }},
                        confirmButtonText: 'Ù…ÙˆØ§ÙÙ‚',
                        timer: {{ 3000 if category == 'success' else 'null' }},
                        customClass: {
                            popup: 'swal2-arabic',
                            confirmButton: 'swal2-confirm-arabic'
                        }
                    });
                {% endfor %}
            {% endif %}
        {% endwith %}
    });
</script>



</body>
</html>